pico-8 cartridge // http://www.pico-8.com
version 18
__lua__
cartdata("axnjaxn_slushies3")

function clear()
   camera(0,-32)
   cls()
   color(1)
   cursor(1,1)
   map(0,0,0,0,16,16)
end

function pause()
   local ok
   repeat
      flip()
      ok = btnp(4)
   until ok or btnp(5)
   flip()
   return ok
end

function menu(lst,x,y,sel)
   if (sel == nil) sel = 1
   while true do
      for i=1,#lst do
         color(1)
         if (sel==i) color(8)
         print(lst[i], x, y+8*i-8)
      end
      flip()

      if btnp(2) then
         sel = sel - 1
         if (sel <= 0) sel = #lst
      elseif btnp(3) then
         sel = sel + 1
         if (sel > #lst) sel = 1
      elseif btnp(4) then
         return sel
      elseif btnp(5) then
         return nil
      end
   end
end

::mainlogo::
clear()
for i=0,12 do spr(6,24+6*i,0) end
flip()
for r=1,5 do
   for c=0,2 do
      if r==3 then
         spr(16,18,8*r,12,1)
      else
         spr(7,42+18*c,8*r)
      end
   end
   flip()
end
for i=0,12 do spr(6,24+6*i,48) end
pause()

::mainmenu::
clear()
flip()
for r=0,7 do
   for c=0,20 do
      line(1+6*c,5+8*r,5+6*c,8*r+1,1)
   end
   flip()
end
for r=1,6 do
   for c=1,19 do
      line(1+6*c,5+8*r,5+6*c,8*r+1,15)
   end
   flip()
end

print("main menu",46,8,1)
m={"new game", "load game", "credits"}
if (dget(0)==0) del(m,m[2])
repeat
   sel=menu(m, 8, 16, #m-1)
until sel

if sel==1 then
   clear()
   print("2004 ad...")
   print("your corporation, slushies")
   print("international makers")
   print("incorporated, or sim inc. for")
   print("short has gone belly up. you")
   print("used the time machine to come")
   print("back one year and save your")
   print("business from bankruptcy. you")
   print("have one year to fix things")
   print("before they go south again.")
   pause()
   dset(0,1)
   dset(1,100)
   dset(2,0)
   dset(3,100)
   dset(4,10)
   dset(5,1)
   dset(6,0)
   dset(7,0.50)
elseif sel==#m then
   clear()
   print("slushies 3 pico-8 port")
   print("----------------------")
   print("concept and development")
   print("brian jackson")
   print("axnjaxn.com")
   print("(c) 2003-2020")
   pause()
   goto mainmenu
end

stats={
   m=dget(1),
   s=dget(2),
   h=dget(3),
   c=dget(4),
   d=dget(5),
   k=dget(6),
   p=dget(7)
}

::status::
clear()
line(1,1,126,1)
line(126,1,126,53)
line(1,53,1,1)
line(1,9,126,9)
line(118,1,118,9)
line(124,3,120,7)
line(120,3,124,7)
print("status",48,3)

for i=21,126,21 do
   line(i-20,55,i-20,63)
   line(i-20,55,i-1,55)
end
print("run",3,57)
print("sply",24,57)
print("fite",45,57)
print("nite",66,57)
print("cort",87,57)
print("end",108,57)

print("money",3,15)
print("slushies",3,21)
print("health",3,27)
print("customers",3,33)
print("day",3,39)
print("price",3,45)
color(8)
print(stats.m,45,15)
print(stats.s,45,21)
print(stats.h,45,27)
print(stats.c,45,33)
print(stats.d,45,39)
print(stats.p,45,45)
pause()

__gfx__
00000000ffffffff7f7f7ffffff7f7f7ffffffffffffffff00000000001000000000000000000000000000000000000000000000000000000000000000000000
00000000fffffffff7ffffffffffff7fffffffffffffffff00000000001000000000000000000000000000000000000000000000000000000000000000000000
00700700ffffffff7f7ffffffffff7f7ffffffffffffffff00000000001000000000000000000000000000000000000000000000000000000000000000000000
00077000ffffffffffffffffffffffff7ffffffffffffff711111000001000000000000000000000000000000000000000000000000000000000000000000000
00077000ffffffff7ffffffffffffff7ffffffffffffffff00000000001000000000000000000000000000000000000000000000000000000000000000000000
00700700ffffffffffffffffffffffff7f7ffffffffff7f700000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000fffffffffffffffffffffffff7ffffffffffff7f00000000001000000000000000000000000000000000000000000000000000000000000000000000
00000000ffffffffffffffffffffffff7f7f7ffffff7f7f700000000000000000000000000000000000000000000000000000000000000000000000000000000
01110010000010001001110010001001110011111001110000000011110001110011110011111000000011111000000000000000000000000000000000000000
10001010000010001010001010001000100010000010001000000010001010001010001000100000000000010000000000000000000000000000000000000000
10000010000010001010000010001000100010000010000000000010001010001010001000100000000000100000000000000000000000000000000000000000
01110010000010001001110011111000100011110001110000000011110011111011110000100000000000010000000000000000000000000000000000000000
00001010000010001000001010001000100010000000001000000010000010001010100000100000000000001000000000000000000000000000000000000000
10001010000010001010001010001000100010000010001000000010000010001010010000100000000010001000000000000000000000000000000000000000
01110011111001110001110010001001110011111001110000000010000010001010001000100000000001110000000000000000000000000000000000000000
__map__
0201010101010101010101010101010300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101010101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101010101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101010101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101010101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101010101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101010101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0401010101010101010101010101010500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
